# purser
Казначей - система для хранения секретов, которые можно сжечь после прочтения.
Практической пользы не несёт, но на её основе можно объяснить,
как компоновать микросервис систему на Go.

Постановка задачи
=============================

1. Создать микросервис, который реализует 3 метода
2. Создать некую запись в базе данных
3. Получить запись по первичному ключу
4. Удалить запись по первичному ключу
5. Использовать чистую архитектуру
6. Для сохранения данных используется паттерн репозитория и несколько реализаций (sql, nosql и т.д.)
7. На транспортном уровне использовать HTTP и GRPC (использовать кодогенерацию по готовым описаниям сервиса)
8. Реализовать логгирование
9. Реализовать трейсинг с использованием OpenTelemetry
10. Всё можно запустить локально с помощью docker compose 

Как запустить?
==============================

1. Сделать файл `.env` по аналогии с `env.example` - название ключей окружения можно посмотреть в файле `config/config.go`
2. Выбрать нужную базу данных - mysql, redis, postgresql.
3. Запустить сервис с помощью `docker compose up`
4. На http://localhost:3000/ будет слушать HTTP сервер
5. На http://localhost:3001/ будет слушать GRPC сервер
6. Запустите клиенты для генерации секретов 

    ```shell
    
    make cli_curl         
    make cli_grpc         
    make cli_http_client 
    
    ```

7. JWT токен можно сгенерировать тут - https://jwt.io/. Алгоритм - HS512, "sub" - любая строка, секрет по умолчанию - 
   `super_secret_for_purser`
